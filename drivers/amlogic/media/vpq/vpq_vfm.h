/* SPDX-License-Identifier: (GPL-2.0+ OR MIT) */
/*
 * Copyright (c) 2021 Amlogic, Inc. All rights reserved.
 */

#ifndef __VPQ_VFM_H__
#define __VPQ_VFM_H__

#include <linux/amlogic/media/vfm/vframe.h>

enum vpq_vfm_source_type_e { //vframe_source_type_e
	VPQ_SOURCE_TYPE_OTHERS = 0, //MPEG
	VPQ_SOURCE_TYPE_TUNER,
	VPQ_SOURCE_TYPE_CVBS, //AV
	VPQ_SOURCE_TYPE_COMP,
	VPQ_SOURCE_TYPE_HDMI,
	VPQ_SOURCE_TYPE_PPMGR,
	VPQ_SOURCE_TYPE_OSD,
	VPQ_SOURCE_TYPE_HWC,
};

enum vpq_vfm_sig_status_e { //enum tvin_sig_status_e
	VPQ_SIG_STATUS_NULL = 0,
	//processing status from init to the finding of the 1st confirmed status
	VPQ_SIG_STATUS_NOSIG,
	//no signal - physically no signal
	VPQ_SIG_STATUS_UNSTABLE,
	//unstable - physically bad signal
	VPQ_SIG_STATUS_NOTSUP,
	//not supported - physically good signal & not supported
	VPQ_SIG_STATUS_STABLE,
	//stable - physically good signal & supported
};

enum vpq_vfm_sig_fmt_e { //enum tvin_sig_fmt_e
	VPQ_SIG_FMT_NULL = 0,
	/* HDMI Formats */
	VPQ_SIG_FMT_HDMI_640X480P_60HZ = 0x401,
	VPQ_SIG_FMT_HDMI_720X480P_60HZ = 0x402,
	VPQ_SIG_FMT_HDMI_1280X720P_60HZ = 0x403,
	VPQ_SIG_FMT_HDMI_1920X1080I_60HZ = 0x404,
	VPQ_SIG_FMT_HDMI_1440X480I_60HZ = 0x405,
	VPQ_SIG_FMT_HDMI_1440X240P_60HZ = 0x406,
	VPQ_SIG_FMT_HDMI_2880X480I_60HZ = 0x407,
	VPQ_SIG_FMT_HDMI_2880X240P_60HZ = 0x408,
	VPQ_SIG_FMT_HDMI_1440X480P_60HZ = 0x409,
	VPQ_SIG_FMT_HDMI_1920X1080P_60HZ = 0x40a,
	VPQ_SIG_FMT_HDMI_720X576P_50HZ = 0x40b,
	VPQ_SIG_FMT_HDMI_1280X720P_50HZ = 0x40c,
	VPQ_SIG_FMT_HDMI_1920X1080I_50HZ_A = 0x40d,
	VPQ_SIG_FMT_HDMI_1440X576I_50HZ = 0x40e,
	VPQ_SIG_FMT_HDMI_1440X288P_50HZ = 0x40f,
	VPQ_SIG_FMT_HDMI_2880X576I_50HZ = 0x410,
	VPQ_SIG_FMT_HDMI_2880X288P_50HZ = 0x411,
	VPQ_SIG_FMT_HDMI_1440X576P_50HZ = 0x412,
	VPQ_SIG_FMT_HDMI_1920X1080P_50HZ = 0x413,
	VPQ_SIG_FMT_HDMI_1920X1080P_24HZ = 0x414,
	VPQ_SIG_FMT_HDMI_1920X1080P_25HZ = 0x415,
	VPQ_SIG_FMT_HDMI_1920X1080P_30HZ = 0x416,
	VPQ_SIG_FMT_HDMI_2880X480P_60HZ = 0x417,
	VPQ_SIG_FMT_HDMI_2880X576P_50HZ = 0x418,
	VPQ_SIG_FMT_HDMI_1920X1080I_50HZ_B = 0x419,
	VPQ_SIG_FMT_HDMI_1920X1080I_100HZ = 0x41a,
	VPQ_SIG_FMT_HDMI_1280X720P_100HZ = 0x41b,
	VPQ_SIG_FMT_HDMI_720X576P_100HZ = 0x41c,
	VPQ_SIG_FMT_HDMI_1440X576I_100HZ = 0x41d,
	VPQ_SIG_FMT_HDMI_1920X1080I_120HZ = 0x41e,
	VPQ_SIG_FMT_HDMI_1280X720P_120HZ = 0x41f,
	VPQ_SIG_FMT_HDMI_720X480P_120HZ = 0x420,
	VPQ_SIG_FMT_HDMI_1440X480I_120HZ = 0x421,
	VPQ_SIG_FMT_HDMI_720X576P_200HZ = 0x422,
	VPQ_SIG_FMT_HDMI_1440X576I_200HZ = 0x423,
	VPQ_SIG_FMT_HDMI_720X480P_240HZ = 0x424,
	VPQ_SIG_FMT_HDMI_1440X480I_240HZ = 0x425,
	VPQ_SIG_FMT_HDMI_1280X720P_24HZ = 0x426,
	VPQ_SIG_FMT_HDMI_1280X720P_25HZ = 0x427,
	VPQ_SIG_FMT_HDMI_1280X720P_30HZ = 0x428,
	VPQ_SIG_FMT_HDMI_1920X1080P_120HZ = 0x429,
	VPQ_SIG_FMT_HDMI_1920X1080P_100HZ = 0x42a,
	VPQ_SIG_FMT_HDMI_1280X720P_60HZ_FRAME_PACKING = 0x42b,
	VPQ_SIG_FMT_HDMI_1280X720P_50HZ_FRAME_PACKING = 0x42c,
	VPQ_SIG_FMT_HDMI_1280X720P_24HZ_FRAME_PACKING = 0x42d,
	VPQ_SIG_FMT_HDMI_1280X720P_30HZ_FRAME_PACKING = 0x42e,
	VPQ_SIG_FMT_HDMI_1920X1080I_60HZ_FRAME_PACKING = 0x42f,
	VPQ_SIG_FMT_HDMI_1920X1080I_50HZ_FRAME_PACKING = 0x430,
	VPQ_SIG_FMT_HDMI_1920X1080P_24HZ_FRAME_PACKING = 0x431,
	VPQ_SIG_FMT_HDMI_1920X1080P_30HZ_FRAME_PACKING = 0x432,
	VPQ_SIG_FMT_HDMI_800X600_00HZ = 0x433,
	VPQ_SIG_FMT_HDMI_1024X768_00HZ = 0x434,
	VPQ_SIG_FMT_HDMI_720X400_00HZ = 0x435,
	VPQ_SIG_FMT_HDMI_1280X768_00HZ = 0x436,
	VPQ_SIG_FMT_HDMI_1280X800_00HZ = 0x437,
	VPQ_SIG_FMT_HDMI_1280X960_00HZ = 0x438,
	VPQ_SIG_FMT_HDMI_1280X1024_00HZ = 0x439,
	VPQ_SIG_FMT_HDMI_1360X768_00HZ = 0x43a,
	VPQ_SIG_FMT_HDMI_1366X768_00HZ = 0x43b,
	VPQ_SIG_FMT_HDMI_1600X1200_00HZ = 0x43c,
	VPQ_SIG_FMT_HDMI_1920X1200_00HZ = 0x43d,
	VPQ_SIG_FMT_HDMI_1440X900_00HZ = 0x43e,
	VPQ_SIG_FMT_HDMI_1400X1050_00HZ = 0x43f,
	VPQ_SIG_FMT_HDMI_1680X1050_00HZ = 0x440,
	/* for alternative and 4k2k */
	VPQ_SIG_FMT_HDMI_1920X1080I_60HZ_ALTERNATIVE = 0x441,
	VPQ_SIG_FMT_HDMI_1920X1080I_50HZ_ALTERNATIVE = 0x442,
	VPQ_SIG_FMT_HDMI_1920X1080P_24HZ_ALTERNATIVE = 0x443,
	VPQ_SIG_FMT_HDMI_1920X1080P_30HZ_ALTERNATIVE = 0x444,
	VPQ_SIG_FMT_HDMI_3840_2160_00HZ = 0x445,
	VPQ_SIG_FMT_HDMI_4096_2160_00HZ = 0x446,
	VPQ_SIG_FMT_HDMI_1600X900_60HZ = 0x447,
	VPQ_SIG_FMT_HDMI_RESERVE8 = 0x448,
	VPQ_SIG_FMT_HDMI_RESERVE9 = 0x449,
	VPQ_SIG_FMT_HDMI_RESERVE10 = 0x44a,
	VPQ_SIG_FMT_HDMI_RESERVE11 = 0x44b,
	VPQ_SIG_FMT_HDMI_720X480P_60HZ_FRAME_PACKING = 0x44c,
	VPQ_SIG_FMT_HDMI_720X576P_50HZ_FRAME_PACKING = 0x44d,
	VPQ_SIG_FMT_HDMI_640X480P_72HZ = 0x44e,
	VPQ_SIG_FMT_HDMI_640X480P_75HZ = 0x44f,
	VPQ_SIG_FMT_HDMI_1152X864_00HZ = 0x450,
	VPQ_SIG_FMT_HDMI_3840X600_00HZ = 0x451,
	VPQ_SIG_FMT_HDMI_720X350_00HZ = 0x452,
	VPQ_SIG_FMT_HDMI_2688X1520_00HZ = 0x453,
	VPQ_SIG_FMT_HDMI_1920X2160_60HZ = 0x454,
	VPQ_SIG_FMT_HDMI_960X540_60HZ = 0x455,
	VPQ_SIG_FMT_HDMI_2560X1440_00HZ = 0x456,
	VPQ_SIG_FMT_HDMI_640X350_85HZ = 0x457,
	VPQ_SIG_FMT_HDMI_640X400_85HZ = 0x458,
	VPQ_SIG_FMT_HDMI_848X480_60HZ = 0x459,
	VPQ_SIG_FMT_HDMI_1792X1344_85HZ = 0x45a,
	VPQ_SIG_FMT_HDMI_1856X1392_00HZ = 0x45b,
	VPQ_SIG_FMT_HDMI_1920X1440_00HZ = 0x45c,
	VPQ_SIG_FMT_HDMI_2048X1152_60HZ = 0x45d,
	VPQ_SIG_FMT_HDMI_2560X1600_00HZ = 0x45e,
	VPQ_SIG_FMT_HDMI_MAX = 0x45f,
	VPQ_SIG_FMT_HDMI_THRESHOLD = 0x600,
	/* Video Formats */
	VPQ_SIG_FMT_CVBS_NTSC_M = 0x601,
	VPQ_SIG_FMT_CVBS_NTSC_443 = 0x602,
	VPQ_SIG_FMT_CVBS_PAL_I = 0x603,
	VPQ_SIG_FMT_CVBS_PAL_M = 0x604,
	VPQ_SIG_FMT_CVBS_PAL_60 = 0x605,
	VPQ_SIG_FMT_CVBS_PAL_CN = 0x606,
	VPQ_SIG_FMT_CVBS_SECAM = 0x607,
	VPQ_SIG_FMT_CVBS_NTSC_50 = 0x608,
	VPQ_SIG_FMT_CVBS_MAX = 0x609,
	VPQ_SIG_FMT_CVBS_THRESHOLD = 0x800,
	/* 656 Formats */
	VPQ_SIG_FMT_BT656IN_576I_50HZ = 0x801,
	VPQ_SIG_FMT_BT656IN_480I_60HZ = 0x802,
	/* 601 Formats */
	VPQ_SIG_FMT_BT601IN_576I_50HZ = 0x803,
	VPQ_SIG_FMT_BT601IN_480I_60HZ = 0x804,
	/* Camera Formats */
	VPQ_SIG_FMT_CAMERA_640X480P_30HZ = 0x805,
	VPQ_SIG_FMT_CAMERA_800X600P_30HZ = 0x806,
	VPQ_SIG_FMT_CAMERA_1024X768P_30HZ = 0x807,
	VPQ_SIG_FMT_CAMERA_1920X1080P_30HZ = 0x808,
	VPQ_SIG_FMT_CAMERA_1280X720P_30HZ = 0x809,
	VPQ_SIG_FMT_BT601_MAX = 0x80a,
	VPQ_SIG_FMT_BT601_THRESHOLD = 0xa00,
	VPQ_SIG_FMT_MAX,
};

enum vpq_vfm_port_e { //enum tvin_port_e
	VPQ_PORT_NULL = 0x00000000,
	VPQ_PORT_MPEG0 = 0x00000100,
	VPQ_PORT_BT656 = 0x00000200,
	VPQ_PORT_BT601,
	VPQ_PORT_CAMERA,
	VPQ_PORT_BT656_HDMI,
	VPQ_PORT_BT601_HDMI,

	VPQ_PORT_CVBS0 = 0x00001000,
	VPQ_PORT_CVBS1,
	VPQ_PORT_CVBS2,
	VPQ_PORT_CVBS3,

	VPQ_PORT_HDMI0 = 0x00004000,
	VPQ_PORT_HDMI1,
	VPQ_PORT_HDMI2,
	VPQ_PORT_HDMI3,
	VPQ_PORT_HDMI4,
	VPQ_PORT_HDMI5,
	VPQ_PORT_HDMI6,
	VPQ_PORT_HDMI7,

	VPQ_PORT_DVIN0 = 0x00008000,

	VPQ_PORT_VIU1 = 0x0000a000,
	VPQ_PORT_VIU1_VIDEO, /* vpp0 preblend vd1 */
	VPQ_PORT_VIU1_WB0_VD1, /* vpp0 vadj1 output */
	VPQ_PORT_VIU1_WB0_VD2, /* vpp0 vd2 postblend input */
	VPQ_PORT_VIU1_WB0_OSD1, /* vpp0 osd1 postblend input */
	VPQ_PORT_VIU1_WB0_OSD2, /* vpp0 osd2 postblend input */
	VPQ_PORT_VIU1_WB0_VPP, /* vpp0 output */
	VPQ_PORT_VIU1_WB0_POST_BLEND, /* vpp0 postblend output */
	VPQ_PORT_VIU1_WB1_VDIN_BIST,
	VPQ_PORT_VIU1_WB1_VIDEO,
	VPQ_PORT_VIU1_WB1_VD1,
	VPQ_PORT_VIU1_WB1_VD2,
	VPQ_PORT_VIU1_WB1_OSD1,
	VPQ_PORT_VIU1_WB1_OSD2,
	VPQ_PORT_VIU1_WB1_VPP,
	VPQ_PORT_VIU1_WB1_POST_BLEND,
	VPQ_PORT_VIU1_MAX,

	VPQ_PORT_VIU2 = 0x0000C000,
	VPQ_PORT_VIU2_ENCL,
	VPQ_PORT_VIU2_ENCI,
	VPQ_PORT_VIU2_ENCP,
	VPQ_PORT_VIU2_VD1, /* vpp1 vd1 output */
	VPQ_PORT_VIU2_OSD1, /* vpp1 osd1 output */
	VPQ_PORT_VIU2_VPP, /* vpp1 output */
	VPQ_PORT_VIU2_MAX,

	VPQ_PORT_VIU3 = 0x0000D000,
	VPQ_PORT_VIU3_VD1, /* vpp2 vd1 output */
	VPQ_PORT_VIU3_OSD1, /* vpp2 osd1 output */
	VPQ_PORT_VIU3_VPP, /* vpp2 output */
	VPQ_PORT_VIU3_MAX,

	VPQ_PORT_VENC = 0x0000E000,
	VPQ_PORT_VENC0,
	VPQ_PORT_VENC1,
	VPQ_PORT_VENC2,
	VPQ_PORT_VENC_MAX,

	VPQ_PORT_MIPI = 0x00010000,
	VPQ_PORT_ISP = 0x00020000,
	VPQ_PORT_MAX = 0x80000000,
};

enum vpq_vfm_source_mode_e {
	VPQ_SOURCE_MODE_OTHERS = 0,
	VPQ_SOURCE_MODE_PAL,
	VPQ_SOURCE_MODE_NTSC,
	VPQ_SOURCE_MODE_SECAM,
};

enum vpq_vfm_hdr_type_e {
	VPQ_HDR_TYPE_NONE = 0,
	VPQ_HDR_TYPE_SDR,
	VPQ_HDR_TYPE_HDR10,
	VPQ_HDR_TYPE_HLG,
	VPQ_HDR_TYPE_HDR10PLUS,
	VPQ_HDR_TYPE_DOBVI,
	VPQ_HDR_TYPE_MVC,
	VPQ_HDR_TYPE_CUVA_HDR,
	VPQ_HDR_TYPE_CUVA_HLG,
};

enum vpq_vfm_color_primary_e {
	VPQ_COLOR_PRIM_NULL = 0,
	VPQ_COLOR_PRIM_BT601,
	VPQ_COLOR_PRIM_BT709,
	VPQ_COLOR_PRIM_BT2020,
	VPQ_COLOR_PRIM_MAX,
};

enum vpq_vfm_scan_mode_e {
	VPQ_SCAN_MODE_NULL = 0,
	VPQ_SCAN_MODE_PROGRESSIVE,
	VPQ_SCAN_MODE_INTERLACED,
};

enum vpq_vfm_event_info_e {
	VPQ_VFM_EVENT_NONE = 0,
	VPQ_VFM_EVENT_SIG_INFO_CHANGE,
};

void vpq_vfm_init(void);
enum vpq_vfm_source_type_e vpq_vfm_get_source_type(void);
enum vpq_vfm_sig_status_e vpq_vfm_get_signal_status(void);
enum vpq_vfm_sig_fmt_e vpq_vfm_get_signal_format(void);
enum vpq_vfm_port_e vpq_vfm_get_source_port(void);
enum vpq_vfm_source_mode_e vpq_vfm_get_source_mode(void);
enum vpq_vfm_color_primary_e vpq_vfm_get_color_primaries(void);
enum vpq_vfm_hdr_type_e vpq_vfm_get_hdr_type(void);
bool vpq_vfm_get_is_dv(void);
void vpq_frm_get_height_width(unsigned int *height, unsigned int *width);
enum vpq_vfm_scan_mode_e vpq_vfm_get_signal_scan_mode(void);

void vpq_vfm_send_event(enum vpq_vfm_event_info_e event_info);
enum vpq_vfm_event_info_e vpq_vfm_get_event_info(void);

#endif //__VPQ_VFM_H__
